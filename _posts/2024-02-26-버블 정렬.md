---
title: "버블 정렬"
categories: "algorithm"
tag: [algorithm]
toc: true
---

<html>
<head>
  <title>Bubble Sort Visualization</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .bar {
      fill: steelblue;
    }
  </style>
</head>
<body>
  <svg width="500" height="300"></svg>

  <script>
    async function bubbleSort(data) {
      const svg = d3.select("svg");
      const barWidth = 30;
      const barPadding = 5;
      
      const swap = async (arr, idx1, idx2) => {
        await sleep(1000); // 딜레이
        const temp = arr[idx1];
        arr[idx1] = arr[idx2];
        arr[idx2] = temp;
        updateBars(arr);
      };

      const updateBars = (data) => {
        const bars = svg.selectAll("rect").data(data);
        bars.transition()
          .duration(500)
          .attr("x", (d, i) => i * (barWidth + barPadding))
          .attr("y", (d) => svg.attr("height") - d * 10)
          .attr("height", (d) => d * 10)
          .attr("width", barWidth)
          .attr("fill", "steelblue");
      };

      for (let i = 0; i < data.length; i++) {
        for (let j = 0; j < data.length - i - 1; j++) {
          if (data[j] > data[j + 1]) {
            await swap(data, j, j + 1);
          }
        }
      }
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    // 무작위 데이터 생성
    const data = Array.from({ length: 10 }, () => Math.floor(Math.random() * 30) + 1);

    // 시각화
    bubbleSort(data);
  </script>
</body>
</html>
